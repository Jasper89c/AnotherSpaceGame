@page
@model AnotherSpaceGame.Areas.Game.Pages.RankingAllStatsModel
@{
    ViewData["Title"] = "All Empire Rankings";
    Layout = "~/Views/Shared/_LayoutGame.cshtml";
    var tables = new[] {
        new { Id = "battle-ratio", Name = "Battle Ratio" },
        new { Id = "battles-won", Name = "Battles Won" },
        new { Id = "battles-lost", Name = "Battles Lost" },
        new { Id = "richest-empire", Name = "Richest Empire" },
        new { Id = "most-planets", Name = "Most Planets" },
        new { Id = "planets-won", Name = "Planets Won" },
        new { Id = "planets-lost", Name = "Planets Lost" },
        new { Id = "planets-explored", Name = "Planets Explored" },
        new { Id = "planets-plundered", Name = "Planets Plundered" }
    };
}

<h2>Top Empire Statistics</h2>

<div class="mb-3">
    <label for="rankingTableSelect" class="form-label">Select Ranking Table:</label>
    <select id="rankingTableSelect" class="form-select" onchange="showRankingTable(this.value)">
        @foreach (var t in tables)
        {
            <option value="@t.Id">@t.Name</option>
        }
    </select>
</div>

@* Battle Ratio *@
<div id="battle-ratio-table" class="ranking-table">
    <h4>Battle Ratio</h4>
    <table class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>Rank</th>
                <th>Username</th>
                <th>Faction</th>
                <th>Total Planets</th>
                <th>Power Rating</th>
                <th>Battle Ratio</th>
            </tr>
        </thead>
        <tbody>
        @for (int i = 0; i < Model.BattleRatio.Count; i++)
        {
            var e = Model.BattleRatio[i];
            <tr>
                <td>@(i + 1)</td>
                <td>@e.Username</td>
                <td>@e.Faction</td>
                    <td>@e.TotalPlanets.ToString("N0")</td>
                    <td>@e.PowerRating.ToString("N0")</td>
                <td>@e.BattleRatio.ToString("0.00")</td>
            </tr>
        }
        </tbody>
    </table>
</div>

@* Battles Won *@
<div id="battles-won-table" class="ranking-table" style="display:none;">
    <h4>Battles Won</h4>
    <table class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>Rank</th>
                <th>Username</th>
                <th>Faction</th>
                <th>Total Planets</th>
                <th>Power Rating</th>
                <th>Battles Won</th>
            </tr>
        </thead>
        <tbody>
        @for (int i = 0; i < Model.BattlesWon.Count; i++)
        {
            var e = Model.BattlesWon[i];
            <tr>
                <td>@(i + 1)</td>
                <td>@e.Username</td>
                <td>@e.Faction</td>
                    <td>@e.TotalPlanets.ToString("N0")</td>
                    <td>@e.PowerRating.ToString("N0")</td>
                    <td>@e.BattlesWon.ToString("N0")</td>
            </tr>
        }
        </tbody>
    </table>
</div>

@* Battles Lost *@
<div id="battles-lost-table" class="ranking-table" style="display:none;">
    <h4>Battles Lost</h4>
    <table class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>Rank</th>
                <th>Username</th>
                <th>Faction</th>
                <th>Total Planets</th>
                <th>Power Rating</th>
                <th>Battles Lost</th>
            </tr>
        </thead>
        <tbody>
        @for (int i = 0; i < Model.BattlesLost.Count; i++)
        {
            var e = Model.BattlesLost[i];
            <tr>
                <td>@(i + 1)</td>
                <td>@e.Username</td>
                <td>@e.Faction</td>
                    <td>@e.TotalPlanets.ToString("N0")</td>
                    <td>@e.PowerRating.ToString("N0")</td>
                    <td>@e.BattlesLost.ToString("N0")</td>
            </tr>
        }
        </tbody>
    </table>
</div>

@* Richest Empire *@
<div id="richest-empire-table" class="ranking-table" style="display:none;">
    <h4>Richest Empire</h4>
    <table class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>Rank</th>
                <th>Username</th>
                <th>Faction</th>
                <th>Total Planets</th>
                <th>Power Rating</th>
            </tr>
        </thead>
        <tbody>
        @for (int i = 0; i < Model.RichestEmpire.Count; i++)
        {
            var e = Model.RichestEmpire[i];
            <tr>
                <td>@(i + 1)</td>
                <td>@e.Username</td>
                <td>@e.Faction</td>
                    <td>@e.TotalPlanets.ToString("N0")</td>
                    <td>@e.PowerRating.ToString("N0")</td>
            </tr>
        }
        </tbody>
    </table>
</div>

@* Most Planets *@
<div id="most-planets-table" class="ranking-table" style="display:none;">
    <h4>Most Planets</h4>
    <table class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>Rank</th>
                <th>Username</th>
                <th>Faction</th>
                <th>Total Planets</th>
                <th>Power Rating</th>
            </tr>
        </thead>
        <tbody>
        @for (int i = 0; i < Model.MostPlanets.Count; i++)
        {
            var e = Model.MostPlanets[i];
            <tr>
                <td>@(i + 1)</td>
                <td>@e.Username</td>
                <td>@e.Faction</td>
                    <td>@e.TotalPlanets.ToString("N0")</td>
                    <td>@e.PowerRating.ToString("N0")</td>
            </tr>
        }
        </tbody>
    </table>
</div>

@* Planets Won *@
<div id="planets-won-table" class="ranking-table" style="display:none;">
    <h4>Planets Won</h4>
    <table class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>Rank</th>
                <th>Username</th>
                <th>Faction</th>
                <th>Total Planets</th>
                <th>Power Rating</th>
                <th>Planets Won</th>
            </tr>
        </thead>
        <tbody>
        @for (int i = 0; i < Model.PlanetsWon.Count; i++)
        {
            var e = Model.PlanetsWon[i];
            <tr>
                <td>@(i + 1)</td>
                <td>@e.Username</td>
                <td>@e.Faction</td>
                    <td>@e.TotalPlanets.ToString("N0")</td>
                    <td>@e.PowerRating.ToString("N0")</td>
                    <td>@e.PlanetsWon.ToString("N0")</td>
            </tr>
        }
        </tbody>
    </table>
</div>

@* Planets Lost *@
<div id="planets-lost-table" class="ranking-table" style="display:none;">
    <h4>Planets Lost</h4>
    <table class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>Rank</th>
                <th>Username</th>
                <th>Faction</th>
                <th>Total Planets</th>
                <th>Power Rating</th>
                <th>Planets Lost</th>
            </tr>
        </thead>
        <tbody>
        @for (int i = 0; i < Model.PlanetsLost.Count; i++)
        {
            var e = Model.PlanetsLost[i];
            <tr>
                <td>@(i + 1)</td>
                <td>@e.Username</td>
                <td>@e.Faction</td>
                    <td>@e.TotalPlanets.ToString("N0")</td>
                    <td>@e.PowerRating.ToString("N0")</td>
                    <td>@e.PlanetsLost.ToString("N0")</td>
            </tr>
        }
        </tbody>
    </table>
</div>

@* Planets Explored *@
<div id="planets-explored-table" class="ranking-table" style="display:none;">
    <h4>Planets Explored</h4>
    <table class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>Rank</th>
                <th>Username</th>
                <th>Faction</th>
                <th>Total Planets</th>
                <th>Power Rating</th>
                <th>Planets Explored</th>
            </tr>
        </thead>
        <tbody>
        @for (int i = 0; i < Model.PlanetsExplored.Count; i++)
        {
            var e = Model.PlanetsExplored[i];
            <tr>
                <td>@(i + 1)</td>
                <td>@e.Username</td>
                <td>@e.Faction</td>
                    <td>@e.TotalPlanets.ToString("N0")</td>
                    <td>@e.PowerRating.ToString("N0")</td>
                    <td>@e.PlanetsExplored.ToString("N0")</td>
            </tr>
        }
        </tbody>
    </table>
</div>

@* Planets Plundered *@
<div id="planets-plundered-table" class="ranking-table" style="display:none;">
    <h4>Planets Plundered</h4>
    <table class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>Rank</th>
                <th>Username</th>
                <th>Faction</th>
                <th>Total Planets</th>
                <th>Power Rating</th>
                <th>Planets Plundered</th>
            </tr>
        </thead>
        <tbody>
        @for (int i = 0; i < Model.PlanetsPlundered.Count; i++)
        {
            var e = Model.PlanetsPlundered[i];
            <tr>
                <td>@(i + 1)</td>
                <td>@e.Username</td>
                <td>@e.Faction</td>
                    <td>@e.TotalPlanets.ToString("N0")</td>
                    <td>@e.PowerRating.ToString("N0")</td>
                    <td>@e.PlanetsPlunderedStat.ToString("N0")</td>
            </tr>
        }
        </tbody>
    </table>
</div>
<p class="text-muted mb-2">
    <small>Tables last updated: @Model.LastUpdate.ToLocalTime().ToString("yyyy-MM-dd HH:mm:ss")</small>
</p>

@section Scripts {
<script>
    function showRankingTable(id) {
        document.querySelectorAll('.ranking-table').forEach(function (el) {
            el.style.display = 'none';
        });
        document.getElementById(id + '-table').style.display = '';
    }
    // Show the first table by default
    document.addEventListener('DOMContentLoaded', function () {
        showRankingTable('battle-ratio');
    });
</script>
}
